<style>
	#display{
		width : 1000px;
		margin : 0 auto;
	}
	.objDisplay{

		margin-left : 30px;
		margin-top : 30px;
		
		width : 300px;
		height : 400px;
		
		border : 1px solid black;

		float: left;
	}


</style>



<div id="wrap">

	<div>
		<div>
			<span>구매처</span><input type="radio" class="storeChk" name="storeChk" id="" data-name="buyStore" checked>
			<span>공장</span><input type="radio"  class="storeChk" name="storeChk" id="" data-name="factory" >
			<span>판매처</span><input type="radio" class="storeChk" name="storeChk" id="" data-name="sellStore" >	
			
		</div>
		<span> 품목명 : </span><select name="itemName" id="itemName"></select>
		<span> 수량 : </span><input type="number" id="itemCount">
		<button onClick="createItem()">등록</button>
	</div>
	
	<div id="display">
		<div class="objDisplay" id="buyStoreDisplay"></div>
		<div class="objDisplay" id="factoryDisplay"></div>
		<div class="objDisplay" id="sellStoreDisplay"></div>
		
		
	</div>
	
</div>













<script>
// 공급처 >> 공장 >> 판매처


// 각 작업에는 일정 시간이 필요함 >> 물품의 이동은 차량이 이동 형태로 >> 공장 가동은 생상 시간으로
// 필요한 부품이 여러개가 있으며 >> 공장에서 만들 품목을 변경할 경우 리모델링 시간이 필요함

// 히든스텟으로 복지가 있음
// 복지는 수율에 영향을 미침


// 재료 설정을 어떻게 할지 알아보자
// 일단 팩토리오처럼 해봐

// 철판 >> 가공 >> 볼트
// 일단은 뭐든 살 수 있다고 가정
// 일단 가격 기능은 빼고 >> 그래도 넣어야하니깐 아이템에 가격 넣을 수 있게 객체로 만들자
// 갯수도 이따가 넣어 >> 지금 넣을만한가 >> 머리 깨질 일 있니?


// 가장 중요한 시간차 기능을 넣어야함
// 시간차 기능으로인해 생길 수량 버그 들이 문제임


// obj
{

	// 공급처
	var buyStore = {
		name : "buyStore",
		inventory : [],
		
	};
	// 공장
	var factory = {
		name : "factory",
		inventory : [],
	};
	
	// 판매처
	var sellStore = {
		name : "sellStore",
		inventory : [],
	};

	function store(name){
		this.name = name;
		this.inventory = [];
	}
	
	// 품목
	function Item(name, count){
		this.name = name;
		this.count = count;
	}

	var objPool = [buyStore, factory, sellStore];
	
	var itemList = ["철판", "나사", "강철", "돌", "시멘트", "유리"];


}

// item controller
{
	// view obj - item list 
	// viewInfo()
	// 옵저버 패턴 추가 > obj.inventory, itemList
	{
		viewInfo();
		function viewInfo(){
			objPool.map(e=>viewObj(e));
		}
		function viewObj(com){
			let viewDiv = document.getElementById(com.name+"Display");
			viewDiv.innerHTML = "";
			let viewText;
			
			com.inventory.map(e=>{
				viewText = document.createElement("div");
				viewText.innerHTML = e.name + " : " + e.count;
				viewDiv.appendChild(viewText);
			})
		}
		viewItemList();
		function viewItemList(){
			let itemSelet = document.getElementById("itemName");
			itemSelet.innserHTML = "";
			let itemOption;
			itemList.map(e=>{
				itemOption = document.createElement("option");
				itemOption.innerHTML = e;
				itemOption.value = e;
				itemSelet.appendChild(itemOption);
			})

		}
	}

	// 인벤토리에 재고가 있는지 확인하는 함수
	// 시간차땜에 수량이 꼬일 수 있거덩
	function checkItem(com, item){
		
	}

	// 창고에 품목이 들어갈때 나갈때
	// 나중에 금액 확인 로직도 넣어야겠지
	function inStock(com, item){
		// 품목 확인하고 있으면 수량 합치고, 금액도 선입 선출해? 해! >> 따로 놔 같은거 있으면 합쳐서 나오도록
		// 그때 그때 수량 확인 할 것인가 아니면 따로 수량 계산 할 것인가
		// 그때 그때 확인하는 걸로 합시다
		// 그럼 필요한 아이템 목록이 있고 하나하나 돌면서 차감하는 방식으로 합시다
		// 일단은 겹치지않게 입고 >> 나중에 입고 시간 출고 시간도 넣어야 겠네
		
		com.inventory.push(item);
		
	}
	function outStock(com, item){
		// 여기서 순회하면서 선입 선출로 다가 합시다.
		// 가상 개체로 미리 계산하고 마지막에 결정


			
	}
	
	// 배송 - 아이템
	// 아직 구현 안했으니깐 나중에
	{
			function itemLoad(com, item){
			
			}
				
			function itemUnload(com, item){
			
			}
		}
}


// test
{
	function createItem(){
		let objName = document.querySelectorAll(".storeChk:checked")[0].dataset.name;
		let store = window[objName];

		let itemName = document.getElementById("itemName").value;
		let itemCount = document.getElementById("itemCount").value;

		inStock(store, new Item(itemName, itemCount));

		viewInfo();
	}
}


// play






</script>